# roles/bdr_init/templates/postgresql.bdr.conf.j2
#
# See: http://bdr-project.org/docs/0.9.0/bdr-configuration-variables.html

# Generic settings required for BDR
#----------------------------------

# Allow two other peer nodes, plus one for init_replica
max_replication_slots = {{bdr_ports|count + 1}}

# Two peer nodes, plus two slots for pg_basebackup
max_wal_senders = {{bdr_ports|count + 2}}

# Record data for logical replication
wal_level = 'logical'
track_commit_timestamp = on

# Load BDR
shared_preload_libraries = 'bdr'

# Make sure there are enough background worker slots for BDR to run
max_worker_processes = {{bdr_ports|count + 1}}

# These aren't required, but are useful for diagnosing problems
#log_error_verbosity = verbose
#log_min_messages = debug1
#log_line_prefix = 'd=%d p=%p a=%a%q '

